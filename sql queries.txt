MySQL Schema Changes
1. Updated users table
sql
Copy
Edit
CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL,
  role ENUM('admin', 'laundry_owner', 'customer') NOT NULL,
  first_name VARCHAR(255),
  last_name VARCHAR(255),
  phone VARCHAR(20),
  address TEXT,
  dob DATE,
  email VARCHAR(255),
  instagram VARCHAR(255),
  twitter VARCHAR(255),
  facebook VARCHAR(255)
);
2. laundry_places
sql
Copy
Edit
CREATE TABLE IF NOT EXISTS laundry_places (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255),
  description TEXT,
  rating DECIMAL(2,1),
  owner_id INT,
  address TEXT,
  latitude DECIMAL(10, 6),
  longitude DECIMAL(10, 6),
  FOREIGN KEY (owner_id) REFERENCES users(id)
);
3. services table
sql
Copy
Edit
CREATE TABLE IF NOT EXISTS services (
  id INT AUTO_INCREMENT PRIMARY KEY,
  laundry_place_id INT,
  type ENUM('kiloan', 'satuan') NOT NULL,
  name VARCHAR(255),
  price INT,
  FOREIGN KEY (laundry_place_id) REFERENCES laundry_places(id)
);
4. orders
sql
Copy
Edit
CREATE TABLE IF NOT EXISTS orders (
  id INT AUTO_INCREMENT PRIMARY KEY,
  customer_id INT,
  laundry_place_id INT,
  status ENUM('pending', 'driver_assigned', 'received', 'awaiting_payment', 'paid') DEFAULT 'pending',
  type ENUM('kiloan', 'satuan') NOT NULL,
  pickup_datetime DATETIME,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  total_weight DECIMAL(5,2),
  total_price INT,
  FOREIGN KEY (customer_id) REFERENCES users(id),
  FOREIGN KEY (laundry_place_id) REFERENCES laundry_places(id)
);
5. order_items (if satuan)
sql
Copy
Edit
CREATE TABLE IF NOT EXISTS order_items (
  id INT AUTO_INCREMENT PRIMARY KEY,
  order_id INT,
  service_id INT,
  quantity INT,
  FOREIGN KEY (order_id) REFERENCES orders(id),
  FOREIGN KEY (service_id) REFERENCES services(id)
);
6. reviews
sql
Copy
Edit
CREATE TABLE IF NOT EXISTS reviews (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT,
  laundry_place_id INT,
  rating INT CHECK (rating BETWEEN 1 AND 5),
  comment TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (laundry_place_id) REFERENCES laundry_places(id)
);
ðŸ§ª Sample Dummy Data
sql
Copy
Edit
-- Admin
INSERT INTO users (username, password, role, first_name) VALUES
('admin', 'password123', 'admin', 'Niko');

-- Laundry Owner
INSERT INTO users (username, password, role, first_name) VALUES
('owner1', 'password123', 'laundry_owner', 'Rina');

-- Customer
INSERT INTO users (username, password, role, first_name) VALUES
('cust1', 'password123', 'customer', 'Marvin');

-- Laundry Place
INSERT INTO laundry_places (name, description, rating, owner_id, address, latitude, longitude)
VALUES ('KlinKlin Laundry Express', 'Laundry cepat dan bersih', 4.7, 2, 'Jl. Meruya No.1', -6.200000, 106.800000);

-- Services
INSERT INTO services (laundry_place_id, type, name, price) VALUES
(1, 'kiloan', 'Jasa Cuci Reguler', 30000),
(1, 'kiloan', 'Jasa Dry Cleaning', 30000),
(1, 'kiloan', 'Jasa Setrika', 30000),
(1, 'satuan', 'Jas Kerja / Kuliah', 25000),
(1, 'satuan', 'Selimut Besar', 30000),
(1, 'satuan', 'Selimut Sedang', 25000),
(1, 'satuan', 'Selimut Kecil', 20000),
(1, 'satuan', 'Spray Besar', 30000),
(1, 'satuan', 'Spray Sedang', 25000),
(1, 'satuan', 'Spray Kecil', 20000),
(1, 'satuan', 'Karpet Besar', 40000),
(1, 'satuan', 'Karpet Sedang', 30000),
(1, 'satuan', 'Karpet Kecil', 20000);

INSERT INTO orders (customer_id, laundry_place_id, status, type, pickup_datetime)
VALUES
(3, 1, 'pending', 'kiloan', '2025-07-24 10:00:00'),
(3, 1, 'pending', 'satuan', '2025-07-24 14:00:00');
